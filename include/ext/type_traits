/**
 * @file type_traits
 * @author Jung-kang Lee (ntoskrnl7@gmail.com)
 * @brief This Module implements type traits helper features.
 *
 * @copyright Copyright (c) 2020 C++ Extended template library Authors
 *
 */

#pragma once
#ifndef _EXT_TYPE_TRAITS_
#define _EXT_TYPE_TRAITS_

#define CXX_USE_STD_VOID_T
#include "stl_compat"

#include <type_traits>

namespace ext {

///
/// remove_class
///
#if CXX_VER >= 201103L
template <typename T> struct remove_class;

template <typename R, typename C, typename... Args>
struct remove_class<R (C::*)(Args...) const> {
  using type = R(Args...);
};

template <typename R, typename C, typename... Args>
struct remove_class<R (C::*)(Args...)> {
  using type = R(Args...);
};

template <typename T> using remove_class_t = typename remove_class<T>::type;
#endif

///
/// deduce_mem_fn
///
#if CXX_VER >= 201103L
template <typename T, class = void> struct deduce_mem_fn {};

template <typename T>
struct deduce_mem_fn<T, std::void_t<decltype(&T::operator())>> {
  using type = remove_class_t<decltype(&T::operator())>;
};
#endif
} // namespace ext
#endif // _EXT_TYPE_TRAITS_
